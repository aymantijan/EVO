/* ========================================
   CORRECTIONS RESPONSIVE MOBILE POUR EVPE - V2
   Correction spécifique pour la navbar
   ======================================== */

/* 1. NAVBAR - Corrections essentielles pour mobile */
@media (max-width: 768px) {
    .navbar {
        padding: 12px 16px;
    }

    .navbar-container {
        flex-wrap: wrap;
        position: relative;
    }

    /* Logo - Garder uniquement l'icône */
    .navbar-brand {
        font-size: 16px;
        gap: 8px;
    }

    .navbar-brand span {
        display: none; /* Cache "EVPE - Gamification Life" */
    }

    .navbar-brand i {
        font-size: 24px;
    }

    /* MENU - Caché par défaut, en colonne quand ouvert */
    .navbar-menu {
        display: none !important;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        width: 100%;
        flex-direction: column !important;
        margin-top: 12px;
        background: var(--bg-secondary);
        border-radius: 8px;
        padding: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 1000;
        gap: 4px !important;
    }

    .navbar-menu.active {
        display: flex !important;
    }

    .navbar-menu li {
        width: 100%;
        list-style: none;
    }

    .navbar-menu a {
        width: 100%;
        justify-content: flex-start;
        padding: 12px 16px !important;
        font-size: 14px !important;
        border-radius: 6px;
        gap: 12px !important;
    }

    /* Bouton hamburger */
    .navbar-toggle {
        display: block !important;
        background: none;
        border: none;
        color: var(--text-primary);
        font-size: 24px;
        cursor: pointer;
        padding: 8px;
        margin-left: 8px;
        order: 2; /* Place le bouton au milieu */
    }

    /* Section utilisateur */
    .navbar-user {
        order: 3; /* Place à droite */
        gap: 8px;
        margin-left: auto;
    }

    .navbar-user .btn {
        padding: 8px 12px;
        font-size: 12px;
    }

    .navbar-user .btn span {
        display: none; /* Cache "Déconnexion" */
    }

    .user-avatar {
        width: 32px;
        height: 32px;
        font-size: 14px;
    }
}

/* Bouton hamburger caché par défaut sur desktop */
.navbar-toggle {
    display: none;
}

/* 2. PAGE D'ACCUEIL (index.html) */
@media (max-width: 768px) {
    .home-container {
        padding: 0 12px;
    }

    .hero {
        padding: 2rem 1rem;
        margin-bottom: 2rem;
    }

    .hero h1 {
        font-size: 1.8rem;
    }

    .hero p {
        font-size: 1rem;
    }

    .hero-buttons {
        flex-direction: column;
        width: 100%;
    }

    .hero-buttons .btn {
        width: 100%;
        justify-content: center;
    }

    .features {
        grid-template-columns: 1fr;
        gap: 1rem;
    }

    .feature-card {
        padding: 1.5rem;
    }
}

/* 3. LOGIN/REGISTER */
@media (max-width: 480px) {
    .login-wrapper,
    .register-container {
        padding: 0 12px;
        width: 100%;
    }

    .login-container,
    .register-container {
        padding: 30px 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    }

    .logo-section h1 {
        font-size: 20px;
    }

    .logo-icon {
        font-size: 36px !important;
    }

    input[type="text"],
    input[type="password"],
    input[type="email"] {
        font-size: 16px; /* Évite le zoom sur iOS */
    }
}

/* 4. MAIN CONTENT */
@media (max-width: 768px) {
    main {
        padding: 12px;
    }

    h1 {
        font-size: 20px;
    }

    h2 {
        font-size: 18px;
    }

    h3 {
        font-size: 16px;
    }
}

/* 5. TABLEAUX RESPONSIVE */
@media (max-width: 768px) {
    table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
    }

    thead {
        display: none;
    }

    tbody tr {
        display: flex;
        flex-direction: column;
        margin-bottom: 16px;
        border: 1px solid var(--color-border);
        border-radius: 8px;
        padding: 12px;
    }

    tbody td {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid var(--color-border);
    }

    tbody td:last-child {
        border-bottom: none;
    }

    tbody td::before {
        content: attr(data-label);
        font-weight: 600;
        margin-right: 8px;
    }
}

/* 6. GRIDS ET CARDS */
@media (max-width: 768px) {
    .grid,
    .card-grid,
    [class*="grid-"] {
        grid-template-columns: 1fr !important;
    }

    .card {
        margin-bottom: 12px;
    }
}

/* 7. MODALS */
@media (max-width: 768px) {
    .modal,
    .modal-content {
        width: 95% !important;
        margin: 12px;
    }
}

/* 8. BUTTONS */
@media (max-width: 768px) {
    .btn-group {
        flex-direction: column;
        gap: 8px;
    }

    .btn-group .btn {
        width: 100%;
    }
}

/* 9. FORMULAIRES */
@media (max-width: 768px) {
    .form-group {
        margin-bottom: 16px;
    }

    .form-row {
        flex-direction: column;
    }

    .form-row > * {
        width: 100%;
    }
}

/* 10. SETTINGS PAGE */
@media (max-width: 768px) {
    .settings-container {
        padding: 12px;
    }

    .settings-form {
        width: 100%;
    }

    .settings-form textarea {
        min-height: 100px;
    }
}

/* 11. IMAGES ET MÉDIAS */
@media (max-width: 768px) {
    img {
        max-width: 100%;
        height: auto;
    }

    iframe,
    video {
        max-width: 100%;
    }
}

/* 12. FOOTER */
@media (max-width: 768px) {
    footer {
        padding: 16px;
        font-size: 11px;
    }
}

/* 13. OVERFLOW FIX */
body {
    overflow-x: hidden;
}

main {
    overflow-x: hidden;
}

/* 14. TOUCH TARGETS - Minimum 44px pour iOS */
@media (max-width: 768px) {
    button,
    a,
    input[type="submit"],
    input[type="button"] {
        min-height: 44px;
        min-width: 44px;
    }
}

/* 15. SCROLLBAR CUSTOM POUR MOBILE */
@media (max-width: 768px) {
    ::-webkit-scrollbar {
        width: 4px;
        height: 4px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--color-border);
        border-radius: 9999px;
    }
}

/* 16. LANDSCAPE MODE */
@media (max-width: 768px) and (orientation: landscape) {
    .hero {
        padding: 1.5rem 1rem;
    }

    .hero h1 {
        font-size: 1.5rem;
    }

    .navbar {
        padding: 8px 12px;
    }
}

/* 17. TRÈS PETITS ÉCRANS (< 360px) */
@media (max-width: 360px) {
    .hero h1 {
        font-size: 1.5rem;
    }

    .feature-card {
        padding: 1rem;
    }

    .btn {
        font-size: 11px;
        padding: 8px 12px;
    }
}

/* 18. ACCESSIBILITY - Améliorer le focus sur mobile */
@media (max-width: 768px) {
    *:focus {
        outline: 2px solid var(--color-primary);
        outline-offset: 2px;
    }

    button:focus,
    a:focus,
    input:focus,
    select:focus,
    textarea:focus {
        outline: 2px solid var(--color-primary);
        outline-offset: 2px;
    }
}

/* 19. PREVENT TEXT SIZE ADJUST */
html {
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
}

/* 20. SAFE AREAS POUR iOS NOTCH */
@supports (padding: max(0px)) {
    body {
        padding-left: max(0px, env(safe-area-inset-left));
        padding-right: max(0px, env(safe-area-inset-right));
    }

    .navbar {
        padding-left: max(20px, env(safe-area-inset-left));
        padding-right: max(20px, env(safe-area-inset-right));
    }
}

/* 21. FIX SPÉCIFIQUE : Empêcher le menu de s'afficher en flex par défaut */
@media (max-width: 768px) {
    .navbar-container {
        display: flex;
        align-items: center;
    }
    
    .navbar-brand {
        order: 1;
        flex-shrink: 0;
    }
}